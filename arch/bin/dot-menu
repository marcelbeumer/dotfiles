#!/usr/bin/env bash

main_menu() {
  echo -e "Next wallpaper\nLock\nSleep\nReboot\nShutdown" | rofi -dmenu -i -p "Menu"
}

# Example submenu
# power_menu() {
#   local filter="${1:-}"
#   echo -e "← Back\nReboot\nShutdown" | rofi -dmenu -i -p "Power" -filter "$filter"
# }

while true; do
  choice=$(main_menu)
  [[ -z "$choice" ]] && exit 0

  case "$choice" in
    "Next wallpaper")
      dot-wallpaper-next
      ;;
    "Lock")
      dot-lock
      break
      ;;
    "Sleep")
      systemctl suspend
      break
      ;;
    "Reboot")
      reboot
      ;;
    "Shutdown")
      shutdown now
      ;;
    # Example submenu
    # Power)
    #   filter=""
    #   while true; do
    #     sub=$(power_menu "$filter")
    #     filter="$sub"
    #     [[ -z "$sub" || "$sub" == "← Back" ]] && break
    #     case "$sub" in
    #       Reboot) reboot ;;
    #       Shutdown) shutdown now ;;
    #     esac
    #   done
    #   ;;
  esac
done
