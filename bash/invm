#!/bin/bash

cd_in_oms() {
    cd /code/in-oms;
}

cd_in() {
    cd /code/in;
}

single_buster_test() {
    cd_in
    buster-test --config static/javascript/test/buster.js --reporter specification -t static/javascript/test/$1_test.js
}

rebuild_frontend() {
    cd_in
    php app-new/console assets:install static && php app-new/console assetic:dump .
}

watch_frontend() {
    cd_in
    php app-new/console assetic:dump . --force --watch
}

restart_servers() {
    # /etc/init.d/redis-server restart
    /etc/init.d/memcached restart
    /etc/init.d/nginx restart
    /etc/init.d/tomcat6 restart
    /etc/init.d/php5-fpm restart
}

tail_php_log() {
    tail -f /var/log/php.log
}

fix_in_caches() {
    $(cd_in; chmod -R 777 app-new/cache/dev; chmod -R 777 cache);
}

clear_magento_cache() {
    cd_in_oms;
    php magerun.phar cache:clean && php magerun.phar cache:flush && rm /tmp/wsdl-*
}
