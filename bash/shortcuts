[ -z "$DOTFILES_ENV" ] && \
    echo "Please set DOTFILES_ENV"

set -o vi
alias l="ls"
alias ll="ls -ahl"
alias jdate="date +%d\ %h\ %Y\ %H:%M" # journaling date

# Dev
alias a2start="sudo apachectl start"
alias a2restart="sudo apachectl restart"
alias a2stop="sudo apachectl stop"
alias a2="a2restart"
alias vimhttpd="vim $HTTPDCONF"
alias journal_date="date +\%a\ \%d\ \%B\ \%Y\ \%Hh\%M"

function glomexprj() {
  cd ~/dev/glomex/vvs-$1/ && tabset --title
}

function search_and_replace() {
  echo replacing $1 with $2
  expr=s/$1/$2/g
  ack -l $1 | xargs sed -i '' -e $expr
}

function proxysocks() {
    if [ -z "$3" ]; then
        echo "usage: proxysocks \"<connection>\" <port> <country>"
        return
    fi
    echo "Enabling proxysocks"
    networksetup -setsocksfirewallproxy $1 localhost $2
    #ssh proxy-user@proxy-$3.marcelbeumer.com -ND $2
    ssh marcel@marcelbeumer.com -ND $2
    unproxysocks $1
}

function unproxysocks() {
    if [ -z "$1" ]; then
        echo "usage: unproxysocks \"<connection>\""
        return
    fi
    echo "Disabling proxysocks"
    networksetup -setsocksfirewallproxystate $1 off
}
